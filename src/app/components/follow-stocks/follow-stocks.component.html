<section class="stock-list">
    <h2 class="stock-list__title">Stocks that I follow <a *ngIf="followPopup.hasMore$ | async" (click)="followPopup.visible=true"><span class="stock-list__btn stock-list__btn--add">+</span></a></h2>
    <app-follow-stock-popup #followPopup (added)="follow($event)" [watchlist]="watchList"></app-follow-stock-popup>
    <div class="stock-list__grid">
        <div class="stock-list__grid-row" *ngFor="let watched of watchList">
            <div class="stock-list__grid-cell">
                <a (click)="unfollow(watched.symbol)"><span class="stock-list__btn stock-list__btn--remove">&ndash;</span></a>
            </div>
            <div class="stock-list__grid-cell">{{watched.symbol}}</div>
            <div class="stock-list__grid-cell stock-list__grid-cell--txt-blue wide"><app-simple-ticker [symbol]="watched.symbol"></app-simple-ticker></div>
            <div class="stock-list__grid-cell">
                <a (click)="buyPopup.show(watched.symbol)"><span class="btn-transaction btn-transaction--buy">buy</span></a>
            </div>
            <div class="stock-list__grid-cell" *ngIf="allocations[watched.symbol] > 0">
                <a (click)="sellPopup.show(watched.symbol)"><span class="btn-transaction btn-transaction--sell">sell</span></a>
            </div>
            <div class="stock-list__grid-cell" *ngIf="allocations[watched.symbol] > 0">{{allocations[watched.symbol]}}</div>
        </div>
    </div>
</section>

<app-buy-sell-popup #buyPopup operation="buy" (performed)="buy(buyPopup.symbol, buyPopup.amount)"></app-buy-sell-popup>
<app-buy-sell-popup #sellPopup operation="sell" (performed)="sell(sellPopup.symbol, sellPopup.amount)"></app-buy-sell-popup>
